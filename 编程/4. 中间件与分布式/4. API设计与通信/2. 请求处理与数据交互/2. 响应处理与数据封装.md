
# 一. @ResponseBody

HTTL协议的交互方式：请求响应模式（有请求就有响应）。那么Controller程序呢，除了接收请求外，还可以进行响应。

controller方法中的return的结果，怎么就可以响应给浏览器呢？

答案：使用@ResponseBody注解

  

**@ResponseBody注解：**

- 类型：方法注解、类注解
    
- 位置：书写在Controller方法上或类上
    
- 作用：将方法返回值直接响应给浏览器，如果返回值类型是实体对象/集合，将会转换为JSON格式后在响应给浏览器
    

但是在我们所书写的Controller中，只在类上添加了@RestController注解、方法添加了@RequestMapping注解，并没有使用@ResponseBody注解，怎么给浏览器响应呢？

  

这是因为，我们在类上加了@RestController注解，而这个注解是由两个注解组合起来的，分别是：@Controller 、@ResponseBody。 那也就意味着，我们在类上已经添加了@ResponseBody注解了，而一旦在类上加了@ResponseBody注解，就相当于该类所有的方法中都已经添加了@ResponseBody注解。

  
> 提示：前后端分离的项目中，一般直接在请求处理类上加@RestController注解，就无需在方法上加@ResponseBody注解了。


# 二. 数据封装

在上述测试中，我们发现部门的数据中，id、name两个属性是有值的，但是createTime、updateTime两个字段值并未成功封装，而数据库中是有对应的字段值的，这是为什么呢？

![PixPin_2025-04-29_15-09-23.png|500](https://picgo-q1uill.oss-cn-chengdu.aliyuncs.com/img-for-typora/PixPin_2025-04-29_15-09-23.png)

原因如下：

- 实体类属性名和数据库表查询返回的字段名一致，mybatis会自动封装。
    
- 如果实体类属性名和数据库表查询返回的字段名不一致，不能自动封装。
    

  

解决方案：

- 手动结果映射
    
- 起别名
    
- 开启驼峰命名
    

  

**1).** **手动结果映射**

在DeptMapper接口方法上，通过 @Results及@Result 进行手动结果映射。

```Java
@Results({@Result(column = "create_time", property = "createTime"),
          @Result(column = "update_time", property = "updateTime")})
@Select("select id, name, create_time, update_time from dept")
public List<Dept> findAll();
```

说明：

- `@Results` 注解源码：

![PixPin_2025-04-29_15-09-36.png|500](https://picgo-q1uill.oss-cn-chengdu.aliyuncs.com/img-for-typora/PixPin_2025-04-29_15-09-36.png)

- `@Result` 源代码：

![PixPin_2025-04-29_15-09-48.png|500](https://picgo-q1uill.oss-cn-chengdu.aliyuncs.com/img-for-typora/PixPin_2025-04-29_15-09-48.png)


**2). 起别名**

在SQL语句中，对不一样的列名起别名，别名和实体类属性名一样。

```Java
@Select("select id, name, create_time createTime, update_time updateTime from dept")
public List<Dept> findAll();
```

  

**3). 开启驼峰命名****(推荐)**

如果字段名与属性名符合驼峰命名规则，mybatis会自动通过驼峰命名规则映射。驼峰命名规则： abc_xyz => abcXyz

- 表中字段名：abc_xyz
    
- 类中属性名：abcXyz
    

在application.yml中做如下配置，开启开关。

```YAML
mybatis:
  configuration:
    map-underscore-to-camel-case: true
```

要使用驼峰命名前提是 实体类的属性 与 数据库表中的字段名严格遵守驼峰命名。