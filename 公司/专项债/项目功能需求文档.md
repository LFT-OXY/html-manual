# 专项债管理系统功能需求文档

## 一、项目概述

本系统是一个专项债及可研报告管理系统，主要用于专项债券项目和可行性研究报告项目的全生命周期管理，包括项目信息录入、模板管理、文档生成、AI辅助编写等功能。系统基于若依框架开发，采用前后端分离架构。

---

## 二、核心业务模块

### 2.1 专项债项目管理

#### 2.1.1 项目列表展示
- 需要展示项目列表，包含以下信息：
  - 项目编号
  - 报送状态
  - 录入人
  - 编写人
  - 项目名称
  - 覆盖倍数
  - 净利润标识
  - 总投资金额
  - 建设期
  - 运营期
  - 项目类型
  - 项目状态

#### 2.1.2 搜索查询功能
需要支持以下查询条件：
- 项目名称（模糊搜索）
- 项目编号（模糊搜索）
- 项目类型（下拉选择：普通专项债/组合融资）
- 报送状态（下拉选择）
- 建设期（下拉选择）
- 运营期（下拉选择）
- 项目状态（下拉选择）
- 项目创建人（下拉选择，支持搜索）
- 项目编写人（下拉选择，支持搜索）
- 项目终审人（下拉选择，支持搜索）

#### 2.1.3 项目新增功能
需要录入以下项目信息：

**基本信息**
- 项目名称
- 项目编号（自动生成）
- 项目类型（普通专项债/组合融资）
- 项目业主单位
- 建设单位
- 建设地点
- 建设内容及规模
- 建设期（下拉选择）
- 运营期（下拉选择）

**投资信息**
- 总投资金额（自动计算）
- 建设期各年度资金安排（支持5年）：
  - 资本金
  - 专项债券
  - 市场化融资
- 专项债券利率
- 专项债券期限
- 市场化融资利率

**收入支出信息**
- 收入类型（可多选）
- 收入信息详细录入（动态表单）
- 支出信息详细录入：
  - 工资及福利
  - 工资增长序列
  - 管理费
  - 原材料成本
  - 燃料成本
  - 维修费
  - 增值税
  - 附加税

**投向领域信息**
- 一级投向领域（下拉选择）
- 二级投向领域（下拉选择，根据一级联动）

**项目区域信息**
- 省级区域（下拉选择）
- 市级区域（下拉选择，根据省级联动）
- 区县级区域（下拉选择，根据市级联动）

**AI生成字段**（可选择AI生成）
- 近三年财政情况
- 收入可行性分析
- 公益性论证
- 项目建设条件
- 规划政策符合性
- 社会效益分析
- 经济效益分析
- 技术方案
- 工程方案

#### 2.1.4 项目编辑功能
- 需要支持对已录入项目的所有信息进行修改
- 修改时需要保留原有数据作为默认值
- 支持AI重新生成功能

#### 2.1.5 项目查看/审核功能
- 查看模式：只读展示所有项目信息
- 审核模式：
  - 需要展示项目所有信息
  - 提供审核通过/驳回操作
  - 驳回时需要填写审核意见
  - 可以标记需要修改的字段

#### 2.1.6 项目操作功能
- **获取覆盖倍数**：计算项目收益覆盖专项债本息的倍数
- **指派编写人**：
  - 弹出编写人选择对话框
  - 支持按姓名搜索编写人
  - 选择编写人并输入项目编号进行指派
- **生成文档**：
  - 根据项目信息生成专项债申报文档
  - 文档类型包括Word格式
- **下载文档**：
  - 展示已生成的文档列表
  - 支持批量下载
- **批量更新测算表**：支持选中多个项目批量更新财务测算表
- **报送状态管理**：支持快速切换项目报送状态

---

### 2.2 可研项目管理

#### 2.2.1 项目列表展示
需要展示以下信息：
- 项目编号
- 编写人
- 项目名称
- 总投资金额
- 建设期
- 项目类型

#### 2.2.2 搜索查询功能
需要支持以下查询条件：
- 项目名称（模糊搜索）
- 项目编号（模糊搜索）
- 项目类型（下拉选择）
- 项目状态（下拉选择，支持高级选项展开/收起）

#### 2.2.3 可研信息编辑
需要录入以下信息：

**基本信息**
- 项目名称
- 项目编号
- 建设地点
- 项目业主单位
- 建设内容及规模
- 建设期
- 项目类型

**投资估算**
- 总投资金额
- 资金来源构成

**收入预测**
- 收入类型
- 收入测算依据
- 收入增长预测

**AI生成内容**（可选择AI生成）
- 项目背景
- 必要性分析
- 可行性分析
- 技术方案
- 工程方案
- 投资估算
- 经济效益分析
- 社会效益分析

#### 2.2.4 可研操作功能
- **指派编写人**：选择负责编写可研报告的人员
- **生成文档**：根据项目信息生成可研报告Word文档
- **下载文档**：下载已生成的可研报告

---

### 2.3 项目调整管理

#### 2.3.1 调整项目列表
需要展示以下信息：
- 项目编号
- 项目名称
- 编写人
- 总投资金额
- 建设期
- 项目类型
- 覆盖倍数
- 净利润标识

#### 2.3.2 搜索查询功能
需要支持以下查询条件：
- 项目名称（模糊搜索）
- 项目编号（模糊搜索）
- 项目类型（下拉选择）
- 项目状态（支持高级选项展开/收起）

#### 2.3.3 项目调整功能
- **查看项目**：查看项目详细信息
- **项目复制**：基于现有项目创建新项目
- **指派编写人**：重新指派项目编写人员

---

### 2.4 模板管理模块

#### 2.4.1 一级模板管理

**模板列表展示**
需要展示以下信息：
- 模板名称（点击可进入二级模板）
- 一级投向领域
- 二级投向领域

**搜索查询功能**
- 按模板名称搜索

**模板操作功能**
- **新增模板**：
  - 输入模板名称
  - 选择一级投向领域
  - 选择二级投向领域（根据一级领域联动）
- **编辑模板**：修改模板信息
- **删除模板**：删除模板
- **导出模板**：导出模板数据

#### 2.4.2 建设方案模板管理（二级模板）

**模板列表展示**
需要展示以下信息：
- 建设方案名称（点击可进入三级要素模板）
- 所属一级模板
- 排序序号

**模板操作功能**
- **新增建设方案**：输入方案名称和排序序号
- **编辑建设方案**：修改方案信息
- **删除建设方案**：删除方案
- **排序管理**：调整方案显示顺序

#### 2.4.3 建设要素模板管理（三级模板）

**要素列表展示**
需要展示以下信息：
- 要素名称
- 要素做法描述
- 单价
- 数量
- 单位
- 排序序号

**要素操作功能**
- **新增要素**：录入要素详细信息
- **批量新增**：支持批量导入要素
- **编辑要素**：修改要素信息
- **删除要素**：删除要素
- **排序管理**：调整要素显示顺序

#### 2.4.4 收入模板管理

**收入模板列表**
需要展示以下信息：
- 收入类型名称
- 一级投向领域
- 二级投向领域

**模板操作功能**
- **新增收入类型**：
  - 输入收入类型名称
  - 选择投向领域
- **编辑收入类型**：修改收入类型信息
- **删除收入类型**：删除收入类型

#### 2.4.5 收入要素模板管理

**要素列表展示**
需要展示以下信息：
- 要素名称
- 要素数值
- 要素增长序列
- 所属收入类型

**要素操作功能**
- **新增要素**：录入要素名称、数值、增长率等信息
- **编辑要素**：修改要素信息
- **删除要素**：删除要素

#### 2.4.6 支出模板管理

**支出模板列表**
需要展示以下信息：
- 支出项名称
- 一级投向领域
- 二级投向领域

**模板操作功能**
- **新增支出项**：录入支出项信息
- **编辑支出项**：修改支出项信息
- **删除支出项**：删除支出项

---

### 2.5 收入要素管理

#### 2.5.1 收入要素列表
需要展示以下信息：
- 项目ID
- 收入信息ID
- 要素名称
- 要素数值
- 要素增长序列

#### 2.5.2 搜索查询功能
需要支持以下查询条件：
- 项目ID
- 收入信息ID
- 要素名称
- 要素数值
- 要素增长序列

#### 2.5.3 要素操作功能
- **新增要素**：录入收入要素信息
- **编辑要素**：修改要素信息
- **删除要素**：删除要素
- **导出要素**：导出要素数据

---

## 三、AI辅助功能

### 3.1 专项债AI生成服务

#### 3.1.1 支持的生成字段
系统需要支持以下字段的AI生成：
- 近三年财政情况
- 收入可行性分析
- 公益性论证
- 项目建设条件
- 规划政策符合性分析
- 社会效益分析
- 经济效益分析
- 技术方案
- 工程方案

#### 3.1.2 AI生成功能要求
- **流式生成**：内容逐步显示，提升用户体验
- **实时预览**：生成过程中可实时查看内容
- **中断控制**：支持手动停止生成
- **重新生成**：对生成结果不满意可重新生成
- **手动编辑**：生成后支持手动修改内容
- **批量生成**：支持选择多个字段批量生成
- **上下文感知**：基于项目基本信息进行智能生成

#### 3.1.3 生成依据
AI生成需要基于以下项目信息：
- 项目名称
- 建设地点
- 项目业主单位
- 建设内容及规模
- 建设工期
- 总投资
- 资金来源
- 收入类型
- 投向领域

---

### 3.2 可研AI生成服务

#### 3.2.1 支持的生成章节
系统需要支持以下章节的AI生成：
- 项目背景
- 项目建设的必要性
- 市场分析
- 技术方案
- 工程方案
- 项目组织与管理
- 投资估算与资金筹措
- 财务评价
- 经济评价
- 社会效益分析
- 风险分析

#### 3.2.2 生成功能要求
- 流式生成展示
- 支持章节独立生成
- 支持全文档生成
- 生成后可编辑
- 支持重新生成

---

## 四、系统管理模块

### 4.1 用户管理

#### 4.1.1 用户列表展示
需要展示以下信息：
- 用户编号
- 用户名
- 用户昵称
- 所属部门
- 手机号码
- 用户状态（启用/停用）
- 创建时间

#### 4.1.2 搜索查询功能
需要支持以下查询条件：
- 按部门筛选（树形结构）
- 用户名称（模糊搜索）
- 手机号码
- 用户状态
- 创建时间范围

#### 4.1.3 用户操作功能
- **新增用户**：
  - 输入用户基本信息
  - 选择所属部门
  - 分配角色
  - 设置岗位
  - 设置初始密码
- **编辑用户**：修改用户信息
- **删除用户**：删除用户
- **重置密码**：重置用户登录密码
- **分配角色**：为用户分配系统角色
- **批量导入**：批量导入用户
- **导出用户**：导出用户数据

---

### 4.2 部门管理

#### 4.2.1 部门树形展示
- 树形结构展示部门层级
- 支持部门展开/收起
- 显示部门名称和负责人

#### 4.2.2 部门操作功能
- **新增部门**：
  - 选择上级部门
  - 输入部门名称
  - 设置显示排序
  - 指定部门负责人
  - 输入联系电话
- **编辑部门**：修改部门信息
- **删除部门**：删除部门（需检查是否有下级部门或用户）

---

### 4.3 角色管理

#### 4.3.1 角色列表展示
需要展示以下信息：
- 角色编号
- 角色名称
- 权限字符
- 显示顺序
- 角色状态
- 创建时间

#### 4.3.2 角色操作功能
- **新增角色**：
  - 输入角色基本信息
  - 分配菜单权限
  - 设置数据权限范围
- **编辑角色**：修改角色信息
- **删除角色**：删除角色
- **分配用户**：为角色批量分配用户
- **数据权限设置**：
  - 全部数据权限
  - 自定义数据权限
  - 本部门数据权限
  - 本部门及以下数据权限
  - 仅本人数据权限

---

### 4.4 菜单管理

#### 4.4.1 菜单树形展示
- 树形结构展示菜单层级
- 显示菜单名称、图标、排序、权限标识

#### 4.4.2 菜单操作功能
- **新增菜单**：
  - 选择菜单类型（目录/菜单/按钮）
  - 输入菜单名称
  - 选择菜单图标
  - 设置路由地址
  - 设置权限标识
  - 设置显示排序
- **编辑菜单**：修改菜单信息
- **删除菜单**：删除菜单

---

### 4.5 字典管理

#### 4.5.1 字典类型管理
需要展示以下信息：
- 字典名称
- 字典类型
- 字典状态
- 创建时间

#### 4.5.2 字典数据管理
需要展示以下信息：
- 字典标签
- 字典键值
- 字典排序
- 字典状态
- 备注

#### 4.5.3 字典操作功能
- **新增字典类型**：创建新的字典类型
- **新增字典数据**：为字典类型添加具体数据项
- **编辑字典**：修改字典信息
- **删除字典**：删除字典
- **刷新缓存**：刷新字典缓存

---

### 4.6 参数管理

#### 4.6.1 参数列表展示
需要展示以下信息：
- 参数名称
- 参数键名
- 参数键值
- 系统内置（是/否）
- 创建时间

#### 4.6.2 参数操作功能
- **新增参数**：添加系统参数
- **编辑参数**：修改参数值
- **删除参数**：删除参数（系统内置参数不可删除）
- **刷新缓存**：刷新参数缓存

---

### 4.7 通知公告管理

#### 4.7.1 公告列表展示
需要展示以下信息：
- 公告标题
- 公告类型
- 公告状态（正常/关闭）
- 创建者
- 创建时间

#### 4.7.2 公告操作功能
- **新增公告**：
  - 输入公告标题
  - 选择公告类型
  - 编辑公告内容（富文本编辑器）
  - 设置公告状态
- **编辑公告**：修改公告信息
- **删除公告**：删除公告

---

### 4.8 日志管理

#### 4.8.1 操作日志
需要展示以下信息：
- 系统模块
- 操作类型
- 请求方式
- 操作人员
- 操作地点
- 操作状态
- 操作时间

**查询条件**：
- 系统模块
- 操作人员
- 操作类型
- 操作状态
- 操作时间范围

#### 4.8.2 登录日志
需要展示以下信息：
- 用户名称
- 登录地点
- 登录IP
- 浏览器
- 操作系统
- 登录状态
- 登录时间

**查询条件**：
- 登录IP
- 用户名称
- 登录状态
- 登录时间范围

---

### 4.9 在线用户管理

#### 4.9.1 在线用户列表
需要展示以下信息：
- 序号
- 用户名称
- 部门名称
- 登录IP
- 登录地点
- 浏览器
- 操作系统
- 登录时间

#### 4.9.2 操作功能
- **强退用户**：强制用户退出登录

---

### 4.10 定时任务管理

#### 4.10.1 任务列表展示
需要展示以下信息：
- 任务编号
- 任务名称
- 任务组名
- 调用目标字符串
- cron表达式
- 任务状态
- 执行策略

#### 4.10.2 任务操作功能
- **新增任务**：
  - 输入任务名称
  - 设置任务组名
  - 填写调用目标
  - 设置cron表达式
  - 选择执行策略
- **编辑任务**：修改任务信息
- **删除任务**：删除任务
- **执行一次**：立即执行任务
- **启动任务**：启动定时任务
- **停止任务**：停止定时任务
- **查看日志**：查看任务执行日志

---

### 4.11 代码生成管理

#### 4.11.1 功能要求
- **导入数据表**：从数据库导入表结构
- **生成配置**：
  - 设置生成信息
  - 配置字段信息
  - 设置生成模板
  - 配置关联表
- **生成代码**：一键生成前后端代码
- **预览代码**：预览生成的代码
- **下载代码**：下载生成的代码包

---

## 五、系统监控模块

### 5.1 在线用户监控
- 实时展示当前在线用户
- 显示用户登录信息和会话状态
- 支持强制下线操作

### 5.2 数据监控
- **缓存监控**：
  - 查看Redis缓存信息
  - 查看缓存统计数据
  - 支持缓存清理操作
- **SQL监控**：
  - 查看数据源信息
  - 监控SQL执行情况
  - 分析慢SQL
- **服务监控**：
  - 查看服务器CPU使用率
  - 查看内存使用情况
  - 查看磁盘使用情况
  - 查看JVM信息

---

## 六、通用功能需求

### 6.1 分页功能
- 所有列表页面都需要支持分页
- 可选择每页显示条数（10/20/30/50条）
- 显示总记录数和当前页码

### 6.2 导出功能
- 支持将列表数据导出为Excel文件
- 导出时按照当前查询条件过滤
- 导出字段可配置

### 6.3 批量操作
- 支持多选记录
- 支持批量删除
- 支持批量修改状态

### 6.4 数据校验
- 必填字段需要前端校验
- 数据格式需要校验（如手机号、邮箱等）
- 数据唯一性需要校验（如用户名、项目编号等）

### 6.5 权限控制
- 按钮级权限控制
- 数据级权限控制
- 菜单访问权限控制

### 6.6 操作提示
- 操作成功需要提示
- 操作失败需要提示错误信息
- 删除操作需要二次确认

---

## 七、文档生成需求

### 7.1 专项债文档生成
需要生成以下文档：
- 专项债券项目申报表（Word格式）
- 项目可行性研究报告（Word格式）
- 财务测算表（Excel格式）
- 收益测算表（Excel格式）

### 7.2 可研文档生成
需要生成以下文档：
- 可行性研究报告（Word格式）
- 投资估算表（Excel格式）
- 财务评价表（Excel格式）

### 7.3 文档要求
- 文档格式规范，符合国家标准
- 数据自动填充，减少手工录入
- 支持文档模板自定义
- 生成的文档可直接使用
- 支持文档预览和下载

---

## 八、数据统计与分析需求

### 8.1 首页数据看板
需要展示以下统计信息：
- 项目总数统计
- 在建项目统计
- 已完成项目统计
- 待审核项目统计
- 总投资金额统计
- 专项债券金额统计
- 按投向领域统计项目数量
- 按区域统计项目分布

### 8.2 数据图表展示
需要以下图表：
- 项目数量趋势图（折线图）
- 投资金额分布图（柱状图）
- 项目类型占比图（饼图）
- 投向领域分布图（雷达图）

---

## 九、其他功能需求

### 9.1 个人中心
- 查看个人基本信息
- 修改个人信息
- 修改登录密码
- 更换头像

### 9.2 系统设置
- 修改系统名称
- 修改系统Logo
- 修改登录背景
- 设置系统主题色

### 9.3 帮助文档
- 提供用户操作手册
- 提供常见问题解答
- 提供视频教程

---

## 十、非功能性需求

### 10.1 性能要求
- 页面加载时间不超过3秒
- 支持1000+并发用户
- 数据库响应时间不超过1秒
- 文档生成时间不超过30秒

### 10.2 安全要求
- 用户密码加密存储
- 支持登录验证码
- 支持Token认证
- 防止SQL注入
- 防止XSS攻击

### 10.3 兼容性要求
- 支持Chrome、Firefox、Edge等主流浏览器
- 支持1920x1080及以上分辨率
- 响应式设计，支持平板设备访问

### 10.4 可维护性要求
- 代码规范，注释完整
- 模块化设计，便于扩展
- 日志记录完整，便于问题排查

---

## 附录：数据字典说明

### A.1 项目类型
- 1：普通专项债
- 2：组合融资

### A.2 项目状态
- 0：草稿
- 1：待初审
- 2：初审通过
- 3：初审驳回
- 4：待终审
- 5：终审通过
- 6：终审驳回
- 7：已归档

### A.3 报送状态
- 0：未报送
- 1：已报送
- 2：已退回
- 3：已通过

### A.4 建设期
- 1：1年
- 2：2年
- 3：3年
- 4：4年
- 5：5年

### A.5 运营期
- 10：10年
- 15：15年
- 20：20年
- 25：25年
- 30：30年

### A.6 净利润标识
- 0：否
- 1：是

---

**文档版本**：V1.0  
**创建日期**：2025年10月30日  
**最后更新**：2025年10月30日

